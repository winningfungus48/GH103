var M=Object.defineProperty;var v=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var _=(o,e,t)=>e in o?M(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,g=(o,e)=>{for(var t in e||(e={}))E.call(e,t)&&_(o,t,e[t]);if(v)for(var t of v(e))C.call(e,t)&&_(o,t,e[t]);return o};import{j as c,x as w}from"./index-BpbdH-Au.js";import{r}from"./router-vendor-BfUoC7-o.js";import{P as a}from"./index-C9qaKABp.js";const I="_pageBg_1wzs3_1",B="_extraTop_1wzs3_21",R="_content_1wzs3_35",h={pageBg:I,extraTop:B,content:R},D=({children:o,extraTopContent:e})=>{const t=r.useRef(null);return r.useEffect(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),c.jsxs("div",{className:h.pageBg,ref:t,children:[e&&c.jsx("div",{className:h.extraTop,children:e}),c.jsx("div",{className:h.content,children:o})]})};function k({open:o,onClose:e,title:t,children:i,buttons:p,className:y="",style:x={}}){const l=r.useRef(null),u=r.useRef(null);return r.useEffect(()=>{if(o){u.current=document.activeElement,setTimeout(()=>{if(l.current){const n=l.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n?n.focus():l.current.focus()}},0);const s=n=>{if((n.key==="Escape"||n.key==="Enter")&&e(),n.key==="Tab"&&l.current){const d=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),b=d[0],m=d[d.length-1];!n.shiftKey&&document.activeElement===m?(n.preventDefault(),b.focus()):n.shiftKey&&document.activeElement===b&&(n.preventDefault(),m.focus())}};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),u.current&&u.current.focus()}}},[o,e]),o?c.jsx("div",{className:`modal-backdrop ${o?"show":""}`,style:g({position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},x),"aria-modal":"true",role:"dialog",tabIndex:-1,onClick:s=>{s.target===s.currentTarget&&e()},children:c.jsxs("div",{className:`modal-content ${y}`,ref:l,style:g({background:"#fff",borderRadius:12,minWidth:320,maxWidth:420,width:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.18)",outline:"none"},x),tabIndex:0,children:[c.jsxs("div",{style:{position:"relative"},children:[t&&c.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem",textAlign:"center"},children:t}),c.jsx("button",{onClick:e,style:{position:"absolute",top:"-8px",right:"-8px",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.background="#e5e7eb",s.target.style.color="#374151"},onMouseLeave:s=>{s.target.style.background="#f3f4f6",s.target.style.color="#6b7280"},"aria-label":"Close modal",children:"Ã—"})]}),c.jsx("div",{style:{textAlign:"center"},children:i}),p&&c.jsx("div",{style:{marginTop:24,display:"flex",justifyContent:"center",gap:"12px"},children:p})]})}):null}k.propTypes={open:a.bool.isRequired,onClose:a.func.isRequired,title:a.oneOfType([a.string,a.node]),children:a.node,buttons:a.node,className:a.string,style:a.object};const N="_welcomeModal_1bgti_1",S="_welcomeContent_1bgti_31",T="_welcomeInstructions_1bgti_43",L="_welcomeButtons_1bgti_59",P="_welcomePlayButton_1bgti_71",f={welcomeModal:N,welcomeContent:S,welcomeInstructions:T,welcomeButtons:L,welcomePlayButton:P};function $(o,e,t=!0){const i=`welcomeModal_${o.toLowerCase().replace(/\s+/g,"_")}`,p=()=>w.getItem(i)==="true",y=()=>{w.setItem(i,"true")},x=r.useCallback(()=>{w.removeItem(i)},[i]),[l,u]=r.useState(t&&!p()),s=r.useRef(null),n=r.useCallback(()=>{u(!1),y(),setTimeout(()=>{s.current&&s.current.focus()},100)},[]),d=r.useCallback(()=>{u(!0)},[]);return r.useEffect(()=>{if(!l)return;const m=j=>{j.key==="Escape"&&n()};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[l,n]),{WelcomeModal:r.useCallback(()=>l?c.jsx(k,{open:l,onClose:n,title:o,className:f.welcomeModal,children:c.jsxs("div",{className:f.welcomeContent,children:[c.jsx("p",{className:f.welcomeInstructions,children:e}),c.jsx("div",{className:f.welcomeButtons,children:c.jsx("button",{className:f.welcomePlayButton,onClick:n,autoFocus:!0,children:"Play"})})]})}):null,[l,o,e,n]),isOpen:l,closeModal:n,openModal:d,resetWelcomeModal:x,gameContainerRef:s}}export{D as G,k as M,$ as u};
