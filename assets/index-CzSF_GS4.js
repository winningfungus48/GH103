var V=Object.defineProperty,$=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var C=(l,n,t)=>n in l?V(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,h=(l,n)=>{for(var t in n||(n={}))Z.call(n,t)&&C(l,t,n[t]);if(k)for(var t of k(n))U.call(n,t)&&C(l,t,n[t]);return l},x=(l,n)=>$(l,D(n));import{j as s,r as Y,t as K}from"./index-Dz65CAxN.js";import{d as J,r as P}from"./router-vendor-BfUoC7-o.js";import{u as q,G as F,M as H}from"./useWelcomeModal-CPqjDDpd.js";import{u as Q}from"./useDailySeed-CCpBxUz8.js";import"./react-vendor-C0DUGSOM.js";import"./helmet-vendor-CTOi22zu.js";import"./index-C9qaKABp.js";const X="_container_7fupj_1",ee="_puzzleContainer_7fupj_75",se="_puzzle_7fupj_75",te="_row_7fupj_115",ae="_tile_7fupj_127",ne="_empty_7fupj_191",oe="_correct_7fupj_215",le="_controls_7fupj_231",re="_resetBtn_7fupj_253",ce="_moves_7fupj_309",ie="_stats_7fupj_321",ue="_stat_7fupj_321",me="_statValue_7fupj_349",de="_statLabel_7fupj_363",ze="_playAgainBtn_7fupj_377",pe="_closeBtn_7fupj_413",a={container:X,puzzleContainer:ee,puzzle:se,row:te,tile:ae,empty:ne,correct:oe,controls:le,resetBtn:re,moves:ce,stats:ie,stat:ue,statValue:me,statLabel:de,playAgainBtn:ze,closeBtn:pe},A={puzzle:[],solvedPuzzle:[],currentPuzzle:[],gameOver:!1,gameWon:!1,maxMoves:50,currentMoves:0,puzzleSize:3,emptyPosition:{row:2,col:2}},O=[[1,2,3,4,5,6,7,8,0],[8,7,6,5,4,3,2,1,0],[1,3,5,7,0,8,6,4,2],[2,4,6,8,0,1,3,5,7]],I=["Puzzle Master!","Jigsaw Genius!","Pattern Pro!","Sliding Champion!","Puzzle Wizard!","Tile Tamer!","Arrangement Ace!","Order Expert!"];function ve(l){const n=(()=>{let v=l;return()=>(v=(v*9301+49297)%233280,v/233280)})(),t=Math.floor(n()*O.length),e=[...O[t]],i=[...e],N=20+Math.floor(n()*30);for(let v=0;v<N;v++){const M=fe(i);if(M.length>0){const g=M[Math.floor(n()*M.length)];he(i,g)}}return{puzzle:i,solvedPuzzle:e}}function fe(l){const n=l.indexOf(0),t=Math.floor(n/3),e=n%3,i=[];return t>0&&i.push({direction:"up",from:{row:t-1,col:e}}),t<2&&i.push({direction:"down",from:{row:t+1,col:e}}),e>0&&i.push({direction:"left",from:{row:t,col:e-1}}),e<2&&i.push({direction:"right",from:{row:t,col:e+1}}),i}function he(l,n){const t=l.indexOf(0),e=n.from.row*3+n.from.col;[l[t],l[e]]=[l[e],l[t]]}function L(l,n){return l.every((t,e)=>t===n[e])}const Ne=({instructions:l})=>{const n=J(),t=Q(),[e,i]=P.useState(A),[N,v]=P.useState(""),[M,g]=P.useState(!1),[p,W]=P.useState({}),{WelcomeModal:B}=q("Puzzlele",l);P.useEffect(()=>{if(t!==null){const{puzzle:r,solvedPuzzle:o}=ve(t);i(u=>x(h({},u),{puzzle:r,solvedPuzzle:o,currentPuzzle:[...r]}))}},[t]);const E=(r,o)=>{if(e.gameOver)return;const u=r*3+o,c=e.currentPuzzle.indexOf(0),z=Math.floor(c/3),m=c%3;if(Math.abs(r-z)===1&&o===m||Math.abs(o-m)===1&&r===z){const d=[...e.currentPuzzle];[d[u],d[c]]=[d[c],d[u]];const _=e.currentMoves+1,f=L(d,e.solvedPuzzle),j=f||_>=e.maxMoves;i(b=>x(h({},b),{currentPuzzle:d,currentMoves:_,gameOver:j,gameWon:f})),j&&w(f)}},G=r=>{if(e.gameOver)return;const o=e.currentPuzzle.indexOf(0),u=Math.floor(o/3),c=o%3;let z=u,m=c;switch(r.key){case"ArrowUp":u<2&&(z=u+1);break;case"ArrowDown":u>0&&(z=u-1);break;case"ArrowLeft":c<2&&(m=c+1);break;case"ArrowRight":c>0&&(m=c-1);break;default:return}if(z!==u||m!==c){const y=z*3+m,d=[...e.currentPuzzle];[d[o],d[y]]=[d[y],d[o]];const _=e.currentMoves+1,f=L(d,e.solvedPuzzle),j=f||_>=e.maxMoves;i(b=>x(h({},b),{currentPuzzle:d,currentMoves:_,gameOver:j,gameWon:f})),j&&w(f)}},w=r=>{const o=Y(),u=x(h({},o),{gamesPlayed:o.gamesPlayed+1,gamesWon:o.gamesWon+(r?1:0),currentStreak:r?o.currentStreak+1:0,maxStreak:r?Math.max(o.maxStreak,o.currentStreak+1):o.maxStreak,totalMoves:o.totalMoves+e.currentMoves,bestMoves:r?Math.min(o.bestMoves||1/0,e.currentMoves):o.bestMoves});K(u);const c=I[Math.floor(Math.random()*I.length)],z=r?`You solved the puzzle in ${e.currentMoves} moves!`:`Puzzle unsolved. You used ${e.currentMoves} moves.`;W({title:r?c:"Game Over",message:z,stats:u}),g(!0)},S=()=>{g(!1),n("/")},R=()=>{g(!1),i(A),v("")},T=()=>{i(r=>x(h({},r),{currentPuzzle:[...r.puzzle],currentMoves:0,gameOver:!1,gameWon:!1}))};return s.jsxs(F,{children:[s.jsxs("div",{className:a.container,onKeyDown:G,tabIndex:0,role:"application","aria-label":"Puzzlele game","aria-live":"polite","aria-atomic":"true",children:[s.jsx("div",{className:"sr-only","aria-live":"polite",children:e.gameOver?e.gameWon?"Congratulations! You solved the puzzle!":"Game over. Puzzle unsolved.":`Moves: ${e.currentMoves} of ${e.maxMoves}`}),s.jsx("div",{className:a.puzzleContainer,children:s.jsx("div",{className:a.puzzle,role:"grid","aria-label":"Puzzle board",children:Array.from({length:3},(r,o)=>s.jsx("div",{className:a.row,role:"row",children:Array.from({length:3},(u,c)=>{const z=o*3+c,m=e.currentPuzzle[z];return s.jsx("div",{className:`${a.tile} ${m===0?a.empty:""} ${m===e.solvedPuzzle[z]?a.correct:""}`,onClick:()=>E(o,c),role:"gridcell","aria-label":m===0?"Empty space":`Tile ${m}`,tabIndex:0,children:m!==0&&m},c)})},o))})}),s.jsxs("div",{className:a.controls,children:[s.jsx("button",{className:a.resetBtn,onClick:T,disabled:e.gameOver,"aria-label":"Reset puzzle",tabIndex:0,children:"Reset"}),s.jsxs("div",{className:a.moves,children:["Moves: ",e.currentMoves,"/",e.maxMoves]})]})]}),s.jsxs(H,{open:M,onClose:S,title:p.title,children:[s.jsx("p",{children:p.message}),p.stats&&s.jsxs("div",{className:a.stats,children:[s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:p.stats.gamesPlayed}),s.jsx("span",{className:a.statLabel,children:"Games"})]}),s.jsxs("div",{className:a.stat,children:[s.jsxs("span",{className:a.statValue,children:[p.stats.gamesPlayed>0?Math.round(p.stats.gamesWon/p.stats.gamesPlayed*100):0,"%"]}),s.jsx("span",{className:a.statLabel,children:"Win Rate"})]}),s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:p.stats.currentStreak}),s.jsx("span",{className:a.statLabel,children:"Current Streak"})]}),s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:p.stats.maxStreak}),s.jsx("span",{className:a.statLabel,children:"Max Streak"})]}),p.stats.bestMoves&&s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:p.stats.bestMoves}),s.jsx("span",{className:a.statLabel,children:"Best Moves"})]})]}),s.jsxs("div",{slot:"buttons",children:[s.jsx("button",{onClick:R,className:a.playAgainBtn,children:"Play Again"}),s.jsx("button",{onClick:S,className:a.closeBtn,children:"Close"})]})]}),s.jsx(B,{})]})};export{Ne as default};
