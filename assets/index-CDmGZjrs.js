var V=Object.defineProperty,$=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var C=(l,n,t)=>n in l?V(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,f=(l,n)=>{for(var t in n||(n={}))Z.call(n,t)&&C(l,t,n[t]);if(k)for(var t of k(n))U.call(n,t)&&C(l,t,n[t]);return l},x=(l,n)=>$(l,D(n));import{j as s,q as Y,v as K}from"./index-CYVwgDTc.js";import{u as q,r as P}from"./router-vendor-K3Txs3ma.js";import{u as J,G as F}from"./useWelcomeModal-Q3ReE-fg.js";import{u as H}from"./useDailySeed-BCululcd.js";import{M as Q}from"./Modal-BkFHXk8f.js";import"./react-vendor-C0DUGSOM.js";import"./helmet-vendor-DAr0CUAT.js";import"./index-C9qaKABp.js";const X="_container_se5bv_1",ee="_puzzleContainer_se5bv_75",se="_puzzle_se5bv_75",te="_row_se5bv_115",ae="_tile_se5bv_127",ne="_empty_se5bv_191",oe="_correct_se5bv_215",le="_controls_se5bv_231",re="_resetBtn_se5bv_253",ce="_moves_se5bv_309",ie="_stats_se5bv_321",ue="_stat_se5bv_321",me="_statValue_se5bv_349",de="_statLabel_se5bv_363",ve="_playAgainBtn_se5bv_377",ze="_closeBtn_se5bv_413",a={container:X,puzzleContainer:ee,puzzle:se,row:te,tile:ae,empty:ne,correct:oe,controls:le,resetBtn:re,moves:ce,stats:ie,stat:ue,statValue:me,statLabel:de,playAgainBtn:ve,closeBtn:ze},A={puzzle:[],solvedPuzzle:[],currentPuzzle:[],gameOver:!1,gameWon:!1,maxMoves:50,currentMoves:0,puzzleSize:3,emptyPosition:{row:2,col:2}},O=[[1,2,3,4,5,6,7,8,0],[8,7,6,5,4,3,2,1,0],[1,3,5,7,0,8,6,4,2],[2,4,6,8,0,1,3,5,7]],I=["Puzzle Master!","Jigsaw Genius!","Pattern Pro!","Sliding Champion!","Puzzle Wizard!","Tile Tamer!","Arrangement Ace!","Order Expert!"];function he(l){const n=(()=>{let h=l;return()=>(h=(h*9301+49297)%233280,h/233280)})(),t=Math.floor(n()*O.length),e=[...O[t]],i=[...e],N=20+Math.floor(n()*30);for(let h=0;h<N;h++){const M=pe(i);if(M.length>0){const g=M[Math.floor(n()*M.length)];fe(i,g)}}return{puzzle:i,solvedPuzzle:e}}function pe(l){const n=l.indexOf(0),t=Math.floor(n/3),e=n%3,i=[];return t>0&&i.push({direction:"up",from:{row:t-1,col:e}}),t<2&&i.push({direction:"down",from:{row:t+1,col:e}}),e>0&&i.push({direction:"left",from:{row:t,col:e-1}}),e<2&&i.push({direction:"right",from:{row:t,col:e+1}}),i}function fe(l,n){const t=l.indexOf(0),e=n.from.row*3+n.from.col;[l[t],l[e]]=[l[e],l[t]]}function L(l,n){return l.every((t,e)=>t===n[e])}const we=({instructions:l})=>{const n=q(),t=H(),[e,i]=P.useState(A),[N,h]=P.useState(""),[M,g]=P.useState(!1),[z,W]=P.useState({}),{WelcomeModal:B}=J("Puzzlele",l);P.useEffect(()=>{if(t!==null){const{puzzle:r,solvedPuzzle:o}=he(t);i(u=>x(f({},u),{puzzle:r,solvedPuzzle:o,currentPuzzle:[...r]}))}},[t]);const E=(r,o)=>{if(e.gameOver)return;const u=r*3+o,c=e.currentPuzzle.indexOf(0),v=Math.floor(c/3),m=c%3;if(Math.abs(r-v)===1&&o===m||Math.abs(o-m)===1&&r===v){const d=[...e.currentPuzzle];[d[u],d[c]]=[d[c],d[u]];const _=e.currentMoves+1,p=L(d,e.solvedPuzzle),b=p||_>=e.maxMoves;i(j=>x(f({},j),{currentPuzzle:d,currentMoves:_,gameOver:b,gameWon:p})),b&&w(p)}},G=r=>{if(e.gameOver)return;const o=e.currentPuzzle.indexOf(0),u=Math.floor(o/3),c=o%3;let v=u,m=c;switch(r.key){case"ArrowUp":u<2&&(v=u+1);break;case"ArrowDown":u>0&&(v=u-1);break;case"ArrowLeft":c<2&&(m=c+1);break;case"ArrowRight":c>0&&(m=c-1);break;default:return}if(v!==u||m!==c){const y=v*3+m,d=[...e.currentPuzzle];[d[o],d[y]]=[d[y],d[o]];const _=e.currentMoves+1,p=L(d,e.solvedPuzzle),b=p||_>=e.maxMoves;i(j=>x(f({},j),{currentPuzzle:d,currentMoves:_,gameOver:b,gameWon:p})),b&&w(p)}},w=r=>{const o=Y(),u=x(f({},o),{gamesPlayed:o.gamesPlayed+1,gamesWon:o.gamesWon+(r?1:0),currentStreak:r?o.currentStreak+1:0,maxStreak:r?Math.max(o.maxStreak,o.currentStreak+1):o.maxStreak,totalMoves:o.totalMoves+e.currentMoves,bestMoves:r?Math.min(o.bestMoves||1/0,e.currentMoves):o.bestMoves});K(u);const c=I[Math.floor(Math.random()*I.length)],v=r?`You solved the puzzle in ${e.currentMoves} moves!`:`Puzzle unsolved. You used ${e.currentMoves} moves.`;W({title:r?c:"Game Over",message:v,stats:u}),g(!0)},S=()=>{g(!1),n("/")},R=()=>{g(!1),i(A),h("")},T=()=>{i(r=>x(f({},r),{currentPuzzle:[...r.puzzle],currentMoves:0,gameOver:!1,gameWon:!1}))};return s.jsxs(F,{children:[s.jsxs("div",{className:a.container,onKeyDown:G,tabIndex:0,role:"application","aria-label":"Puzzlele game","aria-live":"polite","aria-atomic":"true",children:[s.jsx("div",{className:"sr-only","aria-live":"polite",children:e.gameOver?e.gameWon?"Congratulations! You solved the puzzle!":"Game over. Puzzle unsolved.":`Moves: ${e.currentMoves} of ${e.maxMoves}`}),s.jsx("div",{className:a.puzzleContainer,children:s.jsx("div",{className:a.puzzle,role:"grid","aria-label":"Puzzle board",children:Array.from({length:3},(r,o)=>s.jsx("div",{className:a.row,role:"row",children:Array.from({length:3},(u,c)=>{const v=o*3+c,m=e.currentPuzzle[v];return s.jsx("div",{className:`${a.tile} ${m===0?a.empty:""} ${m===e.solvedPuzzle[v]?a.correct:""}`,onClick:()=>E(o,c),role:"gridcell","aria-label":m===0?"Empty space":`Tile ${m}`,tabIndex:0,children:m!==0&&m},c)})},o))})}),s.jsxs("div",{className:a.controls,children:[s.jsx("button",{className:a.resetBtn,onClick:T,disabled:e.gameOver,"aria-label":"Reset puzzle",tabIndex:0,children:"Reset"}),s.jsxs("div",{className:a.moves,children:["Moves: ",e.currentMoves,"/",e.maxMoves]})]})]}),s.jsxs(Q,{open:M,onClose:S,title:z.title,children:[s.jsx("p",{children:z.message}),z.stats&&s.jsxs("div",{className:a.stats,children:[s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:z.stats.gamesPlayed}),s.jsx("span",{className:a.statLabel,children:"Games"})]}),s.jsxs("div",{className:a.stat,children:[s.jsxs("span",{className:a.statValue,children:[z.stats.gamesPlayed>0?Math.round(z.stats.gamesWon/z.stats.gamesPlayed*100):0,"%"]}),s.jsx("span",{className:a.statLabel,children:"Win Rate"})]}),s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:z.stats.currentStreak}),s.jsx("span",{className:a.statLabel,children:"Current Streak"})]}),s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:z.stats.maxStreak}),s.jsx("span",{className:a.statLabel,children:"Max Streak"})]}),z.stats.bestMoves&&s.jsxs("div",{className:a.stat,children:[s.jsx("span",{className:a.statValue,children:z.stats.bestMoves}),s.jsx("span",{className:a.statLabel,children:"Best Moves"})]})]}),s.jsxs("div",{slot:"buttons",children:[s.jsx("button",{onClick:R,className:a.playAgainBtn,children:"Play Again"}),s.jsx("button",{onClick:S,className:a.closeBtn,children:"Close"})]})]}),s.jsx(B,{})]})};export{we as default};
